{"modules":[{"id":"dff76cf5-d73a-4c12-b68e-495c9a7e1bbc","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2469,"y":245}}},{"id":"9af8d52f-b065-477a-b00a-c849a19de262","type":"PlayPrompt","branches":[{"condition":"Success","transition":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16"}],"parameters":[{"name":"Text","value":"The status of your case is $.External.caseStatus","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1890,"y":251},"useDynamic":false}},{"id":"598bfc87-b906-4c59-828e-7a18dbf1e72e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"342a844a-c105-4c9d-9a32-297f78565e8d"}],"parameters":[{"name":"Text","value":"Your case is being created.\nYour case number is $.External.caseNumber. Someone will be in touch shortly.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2022,"y":533},"useDynamic":false}},{"id":"342a844a-c105-4c9d-9a32-297f78565e8d","type":"SetAttributes","branches":[{"condition":"Success","transition":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16"},{"condition":"Error","transition":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16"}],"parameters":[{"name":"Attribute","value":"caseNumber","key":"sugarCaseNumber","namespace":"External"}],"metadata":{"position":{"x":2216,"y":738}}},{"id":"b1905997-59e5-4d78-9dbd-763e8d156ac1","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"200","transition":"9af8d52f-b065-477a-b00a-c849a19de262"},{"condition":"NoMatch","transition":"cfb0a4cc-b0e1-4748-bcab-d841bf69f69c"}],"parameters":[{"name":"Attribute","value":"statusCode"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1630,"y":155},"conditionMetadata":[{"id":"2abdfd11-f0e3-48d3-b1d3-9fd64c8e3a16","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]}},{"id":"7c4108dc-a97e-4c3c-a69b-4e7f7dcdafbd","type":"SetAttributes","branches":[{"condition":"Success","transition":"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683"},{"condition":"Error","transition":"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683"}],"parameters":[{"name":"Attribute","value":"caseNumber","key":"sugarCaseNumber","namespace":"Lex.Slots"}],"metadata":{"position":{"x":1143,"y":189}}},{"id":"7e3b2b2c-11ea-4777-b3d6-4ac5b93b2683","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"b1905997-59e5-4d78-9dbd-763e8d156ac1"},{"condition":"Error","transition":"c931ee33-1884-4414-85e9-a8b1655e77e2"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:897790359321:function:SugarLambda-CaseStatusFunction-1F65W7FSHVC0I","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"caseNumber","value":"caseNumber","namespace":"Lex.Slots"},{"name":"Parameter","key":"contactId","value":"sugarContactId","namespace":"User Defined"}],"metadata":{"position":{"x":1407,"y":163},"dynamicMetadata":{"caseNumber":true,"contactId":true},"useDynamic":false},"target":"Lambda"},{"id":"e4206c32-04fe-4087-8378-82599f8308ae","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"0","transition":"463c2d91-9192-4952-a079-673b07de5251"},{"condition":"NoMatch","transition":"7c4108dc-a97e-4c3c-a69b-4e7f7dcdafbd"}],"parameters":[{"name":"Attribute","value":"caseNumber"},{"name":"Namespace","value":"Lex.Slots"}],"metadata":{"position":{"x":899,"y":208},"conditionMetadata":[{"id":"e6157d62-298d-4518-8b8c-344c0d6baeea","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"0"}]}},{"id":"2a6d8e7a-6a6d-4ca4-98cf-dd14eb26fb84","type":"PlayPrompt","branches":[{"condition":"Success","transition":"dff76cf5-d73a-4c12-b68e-495c9a7e1bbc"}],"parameters":[{"name":"Text","value":"Thank you, have a good day!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1065,"y":933},"useDynamic":false}},{"id":"9323e97f-8e3f-42d6-bc3c-9afd53f62e9e","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8bf390a6-de38-48ee-93e4-3e5e99557567"}],"parameters":[{"name":"Text","value":"I do not understand that.\nPlease try again.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":276,"y":263},"useDynamic":false}},{"id":"b854d9a5-d006-4a40-b99e-2e5acf4aaf16","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8bf390a6-de38-48ee-93e4-3e5e99557567"}],"parameters":[{"name":"Text","value":"If you would like to do something else, you can choose from the options or type \"done\" if you are done.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2217,"y":236},"useDynamic":false}},{"id":"5f8012d1-cac4-4577-ba60-99c216a7d4a8","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8bf390a6-de38-48ee-93e4-3e5e99557567"}],"parameters":[{"name":"Text","value":"Hello $.Attributes.sugarContactName, you can ask for any of the following options. At any time during our conversation, type “connect to an agent” to speak with an agent.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":286,"y":57},"useDynamic":false}},{"id":"cfb0a4cc-b0e1-4748-bcab-d841bf69f69c","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8bf390a6-de38-48ee-93e4-3e5e99557567"}],"parameters":[{"name":"Text","value":"Error retrieving case $.Lex.Slots.caseNumber.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1891,"y":100},"useDynamic":false}},{"id":"53529a47-c775-4d96-a8d0-e44df173d93e","type":"Transfer","branches":[{"condition":"Error","transition":"c931ee33-1884-4414-85e9-a8b1655e77e2"}],"parameters":[{"name":"ContactFlowId","value":"arn:aws:connect:eu-west-2:897790359321:instance/d6419273-f35a-415a-a390-3779ed422d13/contact-flow/df56912b-3173-4e8c-a743-b687f8c1b276","resourceName":"Sample queue configurations flow"}],"metadata":{"position":{"x":682,"y":533},"useDynamic":false,"ContactFlow":{"id":"arn:aws:connect:eu-west-2:897790359321:instance/d6419273-f35a-415a-a390-3779ed422d13/contact-flow/df56912b-3173-4e8c-a743-b687f8c1b276","text":"Sample queue configurations flow"}},"target":"Flow"},{"id":"463c2d91-9192-4952-a079-673b07de5251","type":"PlayPrompt","branches":[{"condition":"Success","transition":"53529a47-c775-4d96-a8d0-e44df173d93e"}],"parameters":[{"name":"Text","value":"One moment while I transfer you to an agent","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":452,"y":530},"useDynamic":false}},{"id":"8bf390a6-de38-48ee-93e4-3e5e99557567","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"getCase","transition":"e4206c32-04fe-4087-8378-82599f8308ae"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"openCase","transition":"5cc76281-fe75-4004-be2c-d869fc6b6b41"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"done","transition":"2a6d8e7a-6a6d-4ca4-98cf-dd14eb26fb84"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"connectToAgent","transition":"463c2d91-9192-4952-a079-673b07de5251"},{"condition":"NoMatch","transition":"9323e97f-8e3f-42d6-bc3c-9afd53f62e9e"},{"condition":"Error","transition":"c931ee33-1884-4414-85e9-a8b1655e77e2"}],"parameters":[{"name":"Text","value":"a. Check case status\nb. Open a case\nc. Connect to an agent","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"SugarServeSampleBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"eu-west-2"}],"metadata":{"position":{"x":587,"y":51},"conditionMetadata":[{"id":"51ac80ee-daf5-478c-b6f6-6ed75e5cd1a9","value":"getCase"},{"id":"22d84494-5902-4c83-a8a6-5ae1a10b5c17","value":"openCase"},{"id":"c953f25e-3639-4955-83be-42bd208335a6","value":"done"},{"id":"cafedbb5-7046-4a6e-a519-1e6fa45366b0","value":"connectToAgent"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"5cc76281-fe75-4004-be2c-d869fc6b6b41","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"openCaseSelf","transition":"1137efc2-201c-46a6-b1f5-873e4824d06b"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"connectToAgent","transition":"463c2d91-9192-4952-a079-673b07de5251"},{"condition":"NoMatch","transition":"463c2d91-9192-4952-a079-673b07de5251"},{"condition":"Error","transition":"463c2d91-9192-4952-a079-673b07de5251"}],"parameters":[{"name":"Text","value":"Would you like to open the case yourself or speak with an agent?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"SugarServeSampleBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"eu-west-2"}],"metadata":{"position":{"x":962,"y":551},"conditionMetadata":[{"id":"0667151c-8b9b-46f9-b569-c75993b23691","value":"openCaseSelf"},{"id":"036bcbcf-b885-42ce-b4d6-510229e035e9","value":"connectToAgent"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"d8e90d4b-9ed8-4640-95b2-a1fb054b224a","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"200","transition":"598bfc87-b906-4c59-828e-7a18dbf1e72e"},{"condition":"NoMatch","transition":"c931ee33-1884-4414-85e9-a8b1655e77e2"}],"parameters":[{"name":"Attribute","value":"statusCode"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1763,"y":537},"conditionMetadata":[{"id":"a2e34d82-1a6c-40c6-979d-59c847c5ed2a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]}},{"id":"c931ee33-1884-4414-85e9-a8b1655e77e2","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8bf390a6-de38-48ee-93e4-3e5e99557567"}],"parameters":[{"name":"Text","value":"Unexpected error.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":669,"y":756},"useDynamic":false}},{"id":"1137efc2-201c-46a6-b1f5-873e4824d06b","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"sugarFallback","transition":"cbf96ced-4408-4e68-ab82-c27d95a96220"},{"condition":"NoMatch","transition":"cbf96ced-4408-4e68-ab82-c27d95a96220"},{"condition":"Error","transition":"c931ee33-1884-4414-85e9-a8b1655e77e2"}],"parameters":[{"name":"Text","value":"Please state the problem you are experiencing and press enter when you are done.","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"SugarServeSampleBot"},{"name":"BotAlias","value":"$LATEST"},{"name":"BotRegion","value":"eu-west-2"}],"metadata":{"position":{"x":1282,"y":555},"conditionMetadata":[{"id":"c986c02c-96d2-4d2e-aaad-d7c673b6d727","value":"sugarFallback"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"cbf96ced-4408-4e68-ab82-c27d95a96220","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"d8e90d4b-9ed8-4640-95b2-a1fb054b224a"},{"condition":"Error","transition":"c931ee33-1884-4414-85e9-a8b1655e77e2"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:eu-west-2:897790359321:function:SugarLambda-CreateCaseFunction-RAT1RVRQEHQK","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"caseSource","value":"Chatbot","namespace":null},{"name":"Parameter","key":"contactName","value":"sugarContactName","namespace":"User Defined"},{"name":"Parameter","key":"accountId","value":"sugarAccountId","namespace":"User Defined"},{"name":"Parameter","key":"contactId","value":"sugarContactId","namespace":"User Defined"},{"name":"Parameter","key":"caseDescription","value":"string","namespace":"Lex.SessionAttributes"}],"metadata":{"position":{"x":1535,"y":572},"dynamicMetadata":{"caseSource":false,"contactName":true,"accountId":true,"contactId":true,"caseDescription":true},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"5f8012d1-cac4-4577-ba60-99c216a7d4a8","metadata":{"entryPointPosition":{"x":15,"y":15},"snapToGrid":false,"name":"SugarCRM_Portal_Chat_Contact_Flow-v1.0","description":null,"type":"contactFlow","status":"published","hash":"d47b4954752ff34f6a5207fb6879242bfb3b0e1f91c8fa155737c29c019867cf"}}
